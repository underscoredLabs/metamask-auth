{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n\nvar render = function render(className, url, origin) {\n  var query = className || '.trezor-webusb-button';\n  var buttons = document.querySelectorAll(query);\n  var src = url + \"?\" + Date.now();\n  buttons.forEach(function (b) {\n    if (b.getElementsByTagName('iframe').length < 1) {\n      var bounds = b.getBoundingClientRect();\n      var btnIframe = document.createElement('iframe');\n      btnIframe.frameBorder = '0';\n      btnIframe.width = Math.round(bounds.width) + 'px';\n      btnIframe.height = Math.round(bounds.height) + 'px';\n      btnIframe.style.position = 'absolute';\n      btnIframe.style.top = '0px';\n      btnIframe.style.left = '0px';\n      btnIframe.style.zIndex = '1'; // btnIframe.style.opacity = '0'; // this makes click impossible on cross-origin\n\n      btnIframe.setAttribute('allow', 'usb');\n      btnIframe.setAttribute('scrolling', 'no');\n\n      btnIframe.onload = function () {\n        btnIframe.contentWindow.postMessage({// style: JSON.stringify( window.getComputedStyle(b) ),\n          // outer: b.outerHTML,\n          // inner: b.innerHTML\n        }, origin);\n      };\n\n      btnIframe.src = src; // inject iframe into button\n\n      b.append(btnIframe);\n    }\n  });\n};\n\nvar _default = render;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/leondo/Desktop/metamask-auth/node_modules/trezor-connect/lib/webusb/button.js"],"names":["exports","__esModule","render","className","url","origin","query","buttons","document","querySelectorAll","src","Date","now","forEach","b","getElementsByTagName","length","bounds","getBoundingClientRect","btnIframe","createElement","frameBorder","width","Math","round","height","style","position","top","left","zIndex","setAttribute","onload","contentWindow","postMessage","append","_default"],"mappings":"AAAA;;AAEAA,OAAO,CAACC,UAAR,GAAqB,IAArB;AACAD,OAAO,CAAC,SAAD,CAAP,GAAqB,KAAK,CAA1B;;AAEA,IAAIE,MAAM,GAAG,SAASA,MAAT,CAAgBC,SAAhB,EAA2BC,GAA3B,EAAgCC,MAAhC,EAAwC;AACnD,MAAIC,KAAK,GAAGH,SAAS,IAAI,uBAAzB;AACA,MAAII,OAAO,GAAGC,QAAQ,CAACC,gBAAT,CAA0BH,KAA1B,CAAd;AACA,MAAII,GAAG,GAAGN,GAAG,GAAG,GAAN,GAAYO,IAAI,CAACC,GAAL,EAAtB;AACAL,EAAAA,OAAO,CAACM,OAAR,CAAgB,UAAUC,CAAV,EAAa;AAC3B,QAAIA,CAAC,CAACC,oBAAF,CAAuB,QAAvB,EAAiCC,MAAjC,GAA0C,CAA9C,EAAiD;AAC/C,UAAIC,MAAM,GAAGH,CAAC,CAACI,qBAAF,EAAb;AACA,UAAIC,SAAS,GAAGX,QAAQ,CAACY,aAAT,CAAuB,QAAvB,CAAhB;AACAD,MAAAA,SAAS,CAACE,WAAV,GAAwB,GAAxB;AACAF,MAAAA,SAAS,CAACG,KAAV,GAAkBC,IAAI,CAACC,KAAL,CAAWP,MAAM,CAACK,KAAlB,IAA2B,IAA7C;AACAH,MAAAA,SAAS,CAACM,MAAV,GAAmBF,IAAI,CAACC,KAAL,CAAWP,MAAM,CAACQ,MAAlB,IAA4B,IAA/C;AACAN,MAAAA,SAAS,CAACO,KAAV,CAAgBC,QAAhB,GAA2B,UAA3B;AACAR,MAAAA,SAAS,CAACO,KAAV,CAAgBE,GAAhB,GAAsB,KAAtB;AACAT,MAAAA,SAAS,CAACO,KAAV,CAAgBG,IAAhB,GAAuB,KAAvB;AACAV,MAAAA,SAAS,CAACO,KAAV,CAAgBI,MAAhB,GAAyB,GAAzB,CAT+C,CASjB;;AAE9BX,MAAAA,SAAS,CAACY,YAAV,CAAuB,OAAvB,EAAgC,KAAhC;AACAZ,MAAAA,SAAS,CAACY,YAAV,CAAuB,WAAvB,EAAoC,IAApC;;AAEAZ,MAAAA,SAAS,CAACa,MAAV,GAAmB,YAAY;AAC7Bb,QAAAA,SAAS,CAACc,aAAV,CAAwBC,WAAxB,CAAoC,CAAC;AACnC;AACA;AAFkC,SAApC,EAGG7B,MAHH;AAID,OALD;;AAOAc,MAAAA,SAAS,CAACT,GAAV,GAAgBA,GAAhB,CArB+C,CAqB1B;;AAErBI,MAAAA,CAAC,CAACqB,MAAF,CAAShB,SAAT;AACD;AACF,GA1BD;AA2BD,CA/BD;;AAiCA,IAAIiB,QAAQ,GAAGlC,MAAf;AACAF,OAAO,CAAC,SAAD,CAAP,GAAqBoC,QAArB","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n\nvar render = function render(className, url, origin) {\n  var query = className || '.trezor-webusb-button';\n  var buttons = document.querySelectorAll(query);\n  var src = url + \"?\" + Date.now();\n  buttons.forEach(function (b) {\n    if (b.getElementsByTagName('iframe').length < 1) {\n      var bounds = b.getBoundingClientRect();\n      var btnIframe = document.createElement('iframe');\n      btnIframe.frameBorder = '0';\n      btnIframe.width = Math.round(bounds.width) + 'px';\n      btnIframe.height = Math.round(bounds.height) + 'px';\n      btnIframe.style.position = 'absolute';\n      btnIframe.style.top = '0px';\n      btnIframe.style.left = '0px';\n      btnIframe.style.zIndex = '1'; // btnIframe.style.opacity = '0'; // this makes click impossible on cross-origin\n\n      btnIframe.setAttribute('allow', 'usb');\n      btnIframe.setAttribute('scrolling', 'no');\n\n      btnIframe.onload = function () {\n        btnIframe.contentWindow.postMessage({// style: JSON.stringify( window.getComputedStyle(b) ),\n          // outer: b.outerHTML,\n          // inner: b.innerHTML\n        }, origin);\n      };\n\n      btnIframe.src = src; // inject iframe into button\n\n      b.append(btnIframe);\n    }\n  });\n};\n\nvar _default = render;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}